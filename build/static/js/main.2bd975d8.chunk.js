(this.webpackJsonptwooder=this.webpackJsonptwooder||[]).push([[0],{54:function(e,t,n){e.exports=n(86)},86:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(17),o=n.n(c),u=n(4),i=n(9),s=n(3),l=n(22),p=n(1);function f(){var e=Object(l.a)(['\n  display: inline-block;\n  width: 16px;\n  height: 16px;\n  margin-left: -1px;\n  margin-top: -1px;\n  position: relative;\n  :before,\n  :after {\n    content: "";\n    position: absolute;\n    background: ',";\n  }\n  :after {\n    height: 3px;\n    width: 100%;\n    left: 0;\n    top: 50%;\n    transform: translateY(-50%);\n  }\n"]);return f=function(){return e},e}function d(){var e=Object(l.a)(['\n  display: inline-block;\n  width: 16px;\n  height: 16px;\n  margin-left: -1px;\n  margin-top: -1px;\n  transform: rotateZ(45deg);\n  position: relative;\n  :before,\n  :after {\n    content: "";\n    position: absolute;\n    background: ',";\n  }\n  :before {\n    height: 100%;\n    width: 3px;\n    left: 50%;\n    transform: translateX(-50%);\n  }\n  :after {\n    height: 3px;\n    width: 100%;\n    left: 0;\n    top: 50%;\n    transform: translateY(-50%);\n  }\n"]);return d=function(){return e},e}var m=p.d.div(d(),(function(e){return e.theme.materialText})),v=p.d.div(f(),(function(e){return e.theme.materialText})),b=function(e){var t=e.click;return a.a.createElement(s.b,{style:{float:"right",margin:"3px"},onClick:function(){return t()}},a.a.createElement(m,null))},E=function(e){var t=e.click;return a.a.createElement(s.b,{style:{float:"right",margin:"3px"},onClick:function(){return t()}},a.a.createElement(v,null))},w=n(2),h=n.n(w),O=n(5),g=function(e,t){return function(){var n=Object(O.a)(h.a.mark((function n(r){var a;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r({type:"RESET_NOTIFICATION"}),a=setTimeout((function(){r({type:"RESET_NOTIFICATION"})}),1e3*t),r({type:"DISPLAY_INFO",data:{message:e,timeout:a}});case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},y=function(e,t){return function(){var n=Object(O.a)(h.a.mark((function n(r){var a;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r({type:"RESET_NOTIFICATION"}),a=setTimeout((function(){r({type:"RESET_NOTIFICATION"})}),1e3*t),r({type:"DISPLAY_ERROR",data:{message:e,timeout:a}});case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"DISPLAY_INFO":var n={type:"Notification",message:t.data.message,timeout:t.data.timeout};return n;case"DISPLAY_ERROR":var r={type:"Error",message:t.data.message,timeout:t.data.timeout};return r;case"RESET_NOTIFICATION":return e&&clearTimeout(e.timeout),null;default:return e}},k=function(){var e=Object(u.c)((function(e){return e.notification})),t=Object(u.b)();if(null===e)return null;var n="Error"===e.type?{backgroundColor:"red"}:null;return a.a.createElement(s.p,{className:"window",style:{position:"absolute",left:"80%",width:"20%"}},a.a.createElement(s.r,{className:"window-header",style:n},a.a.createElement("span",null,e.type),a.a.createElement(b,{onClose:function(){return t({type:"RESET_NOTIFICATION"})}})),a.a.createElement(s.q,null,e.message))},x=n(16),S=n(6),I=n(8),T=n.n(I),N="http://localhost:3004/",D=function(){},_=function(){},C=(N="/")+"api/login/",R={auth:function(){var e=Object(O.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,D("api/login/","Authenticating user:",t),e.next=4,T.a.post(C,t);case 4:return n=e.sent,D("api/login/","User authenticated",n),e.abrupt("return",n.data);case 9:throw e.prev=9,e.t0=e.catch(0),_("api/login/",e.t0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},W=N+"api/users/",A={getAll:function(){var e=Object(O.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,D("api/users/","Fetching users"),e.next=4,T.a.get(W);case 4:return t=e.sent,D("api/users/","Users fetched",t),e.abrupt("return",t.data);case 9:throw e.prev=9,e.t0=e.catch(0),_("api/users/",e.t0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(O.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,D("api/users/","Creating user",t),e.next=4,T.a.post(W,t);case 4:return n=e.sent,D("api/users/","User created",n),e.abrupt("return",n.data);case 9:throw e.prev=9,e.t0=e.catch(0),_("api/users/",e.t0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),getById:function(){var e=Object(O.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,D("api/users/","Fetching user",t),e.next=4,T.a.get(W+t);case 4:return n=e.sent,D("api/users/","User fetched",n),e.abrupt("return",n.data);case 9:throw e.prev=9,e.t0=e.catch(0),_("api/users/",e.t0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),remove:function(){var e=Object(O.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,D("api/users/","Deleting user",t),e.next=4,T.a.delete(W+t);case 4:return n=e.sent,D("api/users/","User deleted",n),e.abrupt("return",n.data);case 9:throw e.prev=9,e.t0=e.catch(0),_("api/users/",e.t0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(O.a)(h.a.mark((function e(t,n){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,D("api/users/","Updating user",t,n),e.next=4,T.a.put("".concat(W).concat(t),n);case 4:return r=e.sent,D("api/users/","User updated",r),e.abrupt("return",r.data);case 9:throw e.prev=9,e.t0=e.catch(0),_("api/users/",e.t0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}()},U=n(47),F=n.n(U),P={current:0,last:0,storageChecked:!1,items:[]},z=function(e){e.storageChecked&&window.localStorage.setItem("windows",JSON.stringify(e))},B=function(){var e=JSON.parse(window.localStorage.getItem("windows"));return function(t){e&&e.items&&e.items.map((function(e){t({type:"ADD_WINDOW",data:e})})),t({type:"INIT_WINDOWS"})}},L=function(e,t,n,r){return{type:"ADD_WINDOW",data:{type:e,initialState:t,x:n||0,y:r||0,id:Math.floor(1e4*Math.random()),minimized:!1}}},M=function(e){return{type:"CLOSE_WINDOW",data:e}},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_WINDOW":var n=t.data,r=e.items.find((function(e){if(e.type===n.type){if(!e.initialState)return!0;if(F.a.isEqual(e.initialState,n.initialState))return!0}}));if(r){if(!e.storageChecked){var a=Object(S.a)(Object(S.a)({},e),{},{items:e.items.map((function(e){return e.id===r.id?n:e}))});return a}return e}var c=Object(S.a)(Object(S.a)({},e),{},{current:n.id,last:n.id,items:e.items.concat(n)});return z(c),c;case"CLOSE_WINDOW":var o=Object(S.a)(Object(S.a)({},e),{},{items:e.items.filter((function(e){return e.id!==t.data}))});return z(o),o;case"UPDATE_WINDOW":var u=t.data,i=Object(S.a)(Object(S.a)({},e),{},{items:e.items.map((function(e){return e.id===u.id?u:e}))});return z(i),i;case"SET_CURRENT_WINDOW":var s=Object(S.a)(Object(S.a)({},e),{},{current:t.data});return s;case"RESET_CURRENT_WINDOW":var l=Object(S.a)(Object(S.a)({},e),{},{current:null});return l;case"INIT_WINDOWS":var p=Object(S.a)(Object(S.a)({},e),{},{storageChecked:!0});return p;case"RESET_WINDOWS":return[];default:return e}},J={user:null,token:null,storageChecked:!1},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_SESSION":return Object(S.a)(Object(S.a)({},t.data),{},{storageChecked:!0});case"RESET_SESSION":return Object(S.a)(Object(S.a)({},J),{},{storageChecked:!0});default:return e}},K=function(e){var t=e.setOpen;return a.a.createElement(s.e,{style:{position:"absolute",left:"0",top:"100%"},onClick:function(){return t(!1)}},a.a.createElement(i.b,{to:"/"},a.a.createElement(s.f,null,a.a.createElement("span",{role:"img"},"\u2709\ufe0f"),"Home")),a.a.createElement(s.c,null),a.a.createElement(i.b,{to:"/twoods"},a.a.createElement(s.f,null,a.a.createElement("span",{role:"img"},"\u2709\ufe0f"),"Twoods")),a.a.createElement(i.b,{to:"/users"},a.a.createElement(s.f,null,a.a.createElement("span",{role:"img"},"\ud83d\udc68\u200d\ud83d\udcbb"),"Users")),a.a.createElement(i.b,{to:"/rooms"},a.a.createElement(s.f,null,a.a.createElement("span",{role:"img"},"\ud83d\udcc1"),"Rooms")))},V=function(e){var t=e.setOpen,n=Object(u.b)(),r=function(){n(function(){var e=Object(O.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.localStorage.removeItem("id"),window.localStorage.removeItem("token"),t(g("Successfully logged out",5)),t({type:"RESET_SESSION"});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())};return a.a.createElement(s.e,{style:{position:"absolute",right:"0",top:"100%",zIndex:13},onClick:function(){return t(!1)}},a.a.createElement(i.b,{to:"/user"},a.a.createElement(s.f,null,a.a.createElement("span",{role:"img"},"\ud83d\udc68\u200d\ud83d\udcbb"),"Profile")),a.a.createElement(s.c,null),a.a.createElement(i.b,{to:"/newtwood"},a.a.createElement(s.f,null,a.a.createElement("span",{role:"img"},"\ud83d\udcc1"),"Create Twood")),a.a.createElement(i.b,{to:"/newroom"},a.a.createElement(s.f,null,a.a.createElement("span",{role:"img"},"\ud83d\udcc1"),"Create Room")),a.a.createElement(s.c,null),a.a.createElement(s.f,{onClick:function(){return r()}},a.a.createElement("span",{role:"img","aria-label":"\ud83d\udd19"},"\ud83d\udd19"),"Sign Out"))},H=function(){var e=Object(u.c)((function(e){return e.session.user})),t=Object(u.b)(),n=Object(r.useState)(!1),c=Object(x.a)(n,2),o=c[0],l=c[1],p=Object(r.useState)(!1),f=Object(x.a)(p,2),d=f[0],m=f[1];return a.a.createElement(s.a,{style:{position:"relative",zIndex:12}},a.a.createElement(s.o,{style:{justifyContent:"space-between"}},a.a.createElement("div",{style:{position:"relative",display:"inline-block"}},a.a.createElement(s.b,{onClick:function(){return o||t({type:"RESET_CURRENT_WINDOW"}),void l(!o)},active:o,style:{fontWeight:"bold"}},a.a.createElement("img",{alt:"logo",style:{height:"20px",marginRight:4}}),"Twooder"),o&&a.a.createElement(K,{setOpen:l})),e?a.a.createElement("div",{style:{position:"relative",display:"inline-block"}},a.a.createElement(s.b,{onClick:function(){return d||t({type:"RESET_CURRENT_WINDOW"}),void m(!d)},active:d,style:{fontWeight:"bold"}},e.username),d&&a.a.createElement(V,{setOpen:m})):a.a.createElement(i.b,{to:"/signin"},a.a.createElement("div",{style:{position:"relative",display:"inline-block"}},a.a.createElement(s.b,{style:{fontWeight:"bold"}},"Sign In")))))},X=function(){var e=Object(u.c)((function(e){return e.windows.items})),t=Object(u.b)(),n=function(e){t(function(e){return{type:"UPDATE_WINDOW",data:Object(S.a)(Object(S.a)({},e),{},{minimized:!1})}}(e))};return a.a.createElement("div",{style:{position:"fixed",bottom:"0",left:"0",width:"100%",zIndex:1e3,display:"inline-block"}},a.a.createElement(s.g,{variant:"outside",shadow:!0,style:{padding:"1rem",lineHeight:"1.5",width:"100%"}},e.map((function(e){if(e.minimized)return a.a.createElement(s.b,{key:e.id,onClick:function(){return n(e)},variant:"menu"},e.type,a.a.createElement(s.c,null))}))))},Z=n(10),G=function(){var e=Object(u.b)();return Object(r.useEffect)((function(){e(L("signup"))}),[]),null},Q=function(){var e=Object(u.b)();return Object(r.useEffect)((function(){e(L("signin"))}),[]),null},$=function(){var e=Object(u.c)((function(e){return e.session})).user,t=Object(u.b)();return Object(r.useEffect)((function(){t(L("ownuser",e))}),[]),null},ee=function(){return a.a.createElement("div",null)},te=function(){var e=Object(Z.h)().id,t=Object(u.b)(),n=function(){var n=Object(O.a)(h.a.mark((function n(){var r;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,A.getById(e);case 3:r=n.sent,t(L("user",r)),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),t(y("Error fetching user",5));case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(){return n.apply(this,arguments)}}();return Object(r.useEffect)((function(){n()}),[e]),null},ne=function(){var e=Object(u.b)(),t=function(){var t=Object(O.a)(h.a.mark((function t(){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,A.getAll();case 3:n=t.sent,e(L("users",n)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),e(y("Error fetching users",5));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();return Object(r.useEffect)((function(){t()}),[]),null},re=N+"api/twoods/",ae={getAll:function(){var e=Object(O.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,D("api/twoods/","Fetching twoods"),e.next=4,T.a.get(re);case 4:return t=e.sent,D("api/twoods/","Twoods fetched",t),e.abrupt("return",t.data);case 9:throw e.prev=9,e.t0=e.catch(0),_("api/twoods/",e.t0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(O.a)(h.a.mark((function e(t,n){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,D("api/twoods/","Creating twood",t),e.next=4,T.a.post(re,t,{headers:{Authorization:"Bearer "+n}});case 4:return r=e.sent,D("api/twoods/","Twood created",r),e.abrupt("return",r.data);case 9:throw e.prev=9,e.t0=e.catch(0),_("api/twoods/",e.t0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}(),getById:function(){var e=Object(O.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,D("api/twoods/","Fetching twood",t),e.next=4,T.a.get(re+t);case 4:return n=e.sent,D("api/twoods/","Twood fetched",n),e.abrupt("return",n.data);case 9:throw e.prev=9,e.t0=e.catch(0),_("api/twoods/",e.t0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),getByUser:function(){var e=Object(O.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,D("api/twoods/","Fetching twoods",t),e.next=4,T.a.get(re+"user/"+t);case 4:return n=e.sent,D("api/twoods/","Twoods fetched",n),e.abrupt("return",n.data);case 9:throw e.prev=9,e.t0=e.catch(0),_("api/twoods/",e.t0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),remove:function(){var e=Object(O.a)(h.a.mark((function e(t,n){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,D("api/twoods/","Deleting twood",t),e.next=4,T.a.delete(re+t,{headers:{Authorization:"Bearer "+n}});case 4:return r=e.sent,D("api/twoods/","Twood deleted",r),e.abrupt("return",r.data);case 9:throw e.prev=9,e.t0=e.catch(0),_("api/twoods/",e.t0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}(),update:function(){var e=Object(O.a)(h.a.mark((function e(t,n,r){var a,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=Object(S.a)(Object(S.a)({},n),{},{user:n.user.id?n.user.id:n.user}),D("api/twoods/","Updating twood",t,a),e.next=5,T.a.put("".concat(re).concat(t),a,{headers:{Authorization:"Bearer "+r}});case 5:return c=e.sent,D("api/twoods/","Twood updated",c),e.abrupt("return",c.data);case 10:throw e.prev=10,e.t0=e.catch(0),_("api/twoods/",e.t0),e.t0;case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),like:function(){var e=Object(O.a)(h.a.mark((function e(t,n){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,D("api/twoods/","Liking twood",t),e.next=4,T.a.post("".concat(re).concat(t,"/like"),null,{headers:{Authorization:"Bearer "+n}});case 4:return r=e.sent,D("api/twoods/","Twood successfully liked",t,r),e.abrupt("return",r.data);case 9:throw e.prev=9,e.t0=e.catch(0),_("api/twoods/",e.t0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}(),reply:function(){var e=Object(O.a)(h.a.mark((function e(t,n,r){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,D("api/twoods/","Replying to twood",t,n),e.next=4,T.a.post("".concat(re).concat(t,"/reply"),n,{headers:{Authorization:"Bearer "+r}});case 4:return a=e.sent,D("api/twoods/","Twood replied to",t,a),e.abrupt("return",a.data);case 9:throw e.prev=9,e.t0=e.catch(0),_("api/twoods/",e.t0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n,r){return e.apply(this,arguments)}}()},ce=[],oe=function(e){return{type:"ADD_TWOOD",data:e}},ue=function(e,t){return function(){var n=Object(O.a)(h.a.mark((function n(r){var a;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,ae.like(e.id,t);case 3:a=n.sent,r({type:"UPDATE_TWOOD",data:Object(S.a)(Object(S.a)({},e),{},{likes:a.likes})}),r(g("Twood successfully liked",5)),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),r(y("Error liking twood",5));case 11:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e){return n.apply(this,arguments)}}()},ie=function(e,t,n){return function(){var r=Object(O.a)(h.a.mark((function r(a){var c;return h.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,ae.reply(e.id,t,n);case 3:c=r.sent,a({type:"ADD_TWOOD",data:c}),a({type:"UPDATE_TWOOD",data:Object(S.a)(Object(S.a)({},e),{},{replies:e.replies.concat(c)})}),a(g("Twood successfully replied to",5)),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(0),a(y("Error replying to twood",5));case 12:case"end":return r.stop()}}),r,null,[[0,9]])})));return function(e){return r.apply(this,arguments)}}()},se=function(e,t){return function(){var n=Object(O.a)(h.a.mark((function n(r){return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,ae.remove(e.id,t);case 3:r({type:"REMOVE_TWOOD",data:e}),r(g("Twood successfully deleted",5)),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),r(y("Error deleting twood",5));case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}()},le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TWOOD":if(t.data==[]){var n=t.data.filter((function(t){return!e.find((function(e){return e.id===t.id}))}));return e.concat(n)}var r=t.data,a=e.find((function(e){return e.id===r.id}));return a?e:e.concat(r);case"REMOVE_TWOOD":return e.filter((function(e){return e.id!=t.data}));case"UPDATE_TWOOD":var c=t.data;return e.map((function(e){return e.id===c.id?c:e}));case"RESET_TWOODS":return ce;default:return e}},pe=function(){var e=Object(Z.h)().id,t=Object(u.b)(),n=function(){var n=Object(O.a)(h.a.mark((function n(){return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:try{t(L("twood",e))}catch(r){t(y("Error fetching twood",5))}case 1:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return Object(r.useEffect)((function(){n()}),[e]),null},fe=function(){var e=Object(u.b)(),t=function(){var t=Object(O.a)(h.a.mark((function t(){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ae.getAll();case 3:n=t.sent,e(oe(n)),e(L("twoods",n)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),e(y("Error fetching twoods",5));case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}();return Object(r.useEffect)((function(){t()}),[]),null},de=function(){var e=Object(u.b)();return Object(r.useEffect)((function(){e(L("newtwood"))}),[]),null},me=N+"api/rooms/",ve={getAll:function(){var e=Object(O.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,D("api/rooms/","Fetching rooms"),e.next=4,T.a.get(me);case 4:return t=e.sent,D("api/rooms/","Rooms fetched",t),e.abrupt("return",t.data);case 9:throw e.prev=9,e.t0=e.catch(0),_("api/rooms/",e.t0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(O.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,D("api/rooms/","Creating room",t),e.next=4,T.a.post(me,t);case 4:return n=e.sent,D("api/rooms/","Room created",n),e.abrupt("return",n.data);case 9:throw e.prev=9,e.t0=e.catch(0),_("api/rooms/",e.t0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),getById:function(){var e=Object(O.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,D("api/rooms/","Fetching room",t),e.next=4,T.a.get(me+t);case 4:return n=e.sent,D("api/rooms/","Room fetched",n),e.abrupt("return",n.data);case 9:throw e.prev=9,e.t0=e.catch(0),_("api/rooms/",e.t0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),remove:function(){var e=Object(O.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,D("api/rooms/","Deleting room",t),e.next=4,T.a.delete(me+t);case 4:return n=e.sent,D("api/rooms/","Room deleted",n),e.abrupt("return",n.data);case 9:throw e.prev=9,e.t0=e.catch(0),_("api/rooms/",e.t0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(O.a)(h.a.mark((function e(t,n){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,D("api/rooms/","Updating room",t,n),e.next=4,T.a.put("".concat(me).concat(t),n);case 4:return r=e.sent,D("api/rooms/","Room updated",r),e.abrupt("return",r.data);case 9:throw e.prev=9,e.t0=e.catch(0),_("api/rooms/",e.t0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}()},be=function(){var e=Object(Z.h)().id,t=Object(u.b)(),n=function(){var n=Object(O.a)(h.a.mark((function n(){var r;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,ve.getById(e);case 3:r=n.sent,t(L("room",r)),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),t(y("Error fetching room",5));case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(){return n.apply(this,arguments)}}();return Object(r.useEffect)((function(){n()}),[]),null},Ee=function(){var e=Object(u.b)(),t=function(){var t=Object(O.a)(h.a.mark((function t(){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ve.getAll();case 3:n=t.sent,e(L("rooms",n)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),e(y("Error fetching rooms",5));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();return Object(r.useEffect)((function(){t()}),[]),null},we=function(){var e=Object(u.b)();return Object(r.useEffect)((function(){e(L("newroom"))}),[]),null},he=function(){var e=Object(u.c)((function(e){return e.session})),t=e.user,n=e.storageChecked;return a.a.createElement(Z.d,null,a.a.createElement(Z.b,{path:"/signin"},t?n?a.a.createElement(Z.a,{to:"/"}):a.a.createElement("div",null):a.a.createElement(Q,null)),a.a.createElement(Z.b,{path:"/signup"},t?n?a.a.createElement(Z.a,{to:"/"}):a.a.createElement("div",null):a.a.createElement(G,null)),a.a.createElement(Z.b,{path:"/twoods/:id"},a.a.createElement(pe,null)),a.a.createElement(Z.b,{path:"/twoods"},a.a.createElement(fe,null)),a.a.createElement(Z.b,{path:"/rooms/:id"},a.a.createElement(be,null)),a.a.createElement(Z.b,{path:"/rooms"},a.a.createElement(Ee,null)),a.a.createElement(Z.b,{path:"/users/:id"},a.a.createElement(te,null)),a.a.createElement(Z.b,{path:"/users/"},a.a.createElement(ne,null)),a.a.createElement(Z.b,{path:"/user/"},t?a.a.createElement($,null):n?a.a.createElement(Z.a,{to:"/signin"}):a.a.createElement("div",null)),a.a.createElement(Z.b,{path:"/newtwood/"},t?a.a.createElement(de,null):n?a.a.createElement(Z.a,{to:"/signin"}):a.a.createElement("div",null)),a.a.createElement(Z.b,{path:"/newroom"},t?a.a.createElement(we,null):n?a.a.createElement(Z.a,{to:"/signin"}):a.a.createElement("div",null)),a.a.createElement(Z.b,{path:"/"},a.a.createElement(ee,null)))},Oe=n(48),ge=n.n(Oe),ye=n(49),je=n.n(ye),ke=n(50),xe=n.n(ke);function Se(){var e=Object(l.a)(["\n  ","\n  @font-face {\n    font-family: 'ms_sans_serif';\n    src: url('","') format('woff2');\n    font-weight: 400;\n    font-style: normal\n  }\n  @font-face {\n    font-family: 'ms_sans_serif';\n    src: url('","') format('woff2');\n    font-weight: bold;\n    font-style: normal\n  }\n  body {\n    font-family: 'ms_sans_serif';\n    background-color: #1abc9c;\n  }\n  * {\n    scrollbar-width: none\n  }\n"]);return Se=function(){return e},e}var Ie=Object(p.b)(Se(),s.s,je.a,xe.a),Te=function(e){return a.a.createElement("div",null,a.a.createElement(Ie,null),a.a.createElement(p.a,{theme:ge.a},e.children))},Ne=n(51),De=n.n(Ne),_e=function(e){var t=e.id,n=Object(u.c)((function(e){return e.windows})),r=n.current,c=n.last,o=n.items.find((function(e){return e.id===t})),i=Object(u.b)(),l=Object(Z.g)();return o.minimized?null:a.a.createElement(De.a,{position:{x:o.x,y:o.y},cancel:"strong",onMouseDown:function(){i(function(e){return{type:"SET_CURRENT_WINDOW",data:e}}(t))},onDrag:function(e,t){var n=t.x,r=t.y;i(function(e,t,n){return{type:"UPDATE_WINDOW",data:Object(S.a)(Object(S.a)({},e),{},{x:t,y:n})}}(o,n,r))}},a.a.createElement("div",{style:{display:"flex",justifyContent:"center",position:"absolute",zIndex:r===t?15:11}},a.a.createElement(s.p,{className:"window"},a.a.createElement(s.r,{className:"window-header"},e.title,a.a.createElement(b,{click:function(){i(M(t)),c===t&&l.push("/")}}),a.a.createElement(E,{click:function(){i(function(e){return{type:"UPDATE_WINDOW",data:Object(S.a)(Object(S.a)({},e),{},{minimized:!0})}}(o))}})),a.a.createElement("strong",{className:"no-cursor"},a.a.createElement(s.q,null,e.children)))))},Ce=function(e){var t=Object(r.useState)(""),n=Object(x.a)(t,2),a=n[0],c=n[1];return{input:{type:e,value:a,onChange:function(e){c(e.target.value)}},clear:function(){c("")}}},Re=function(e){var t=Object(u.b)(),n=Object(u.c)((function(e){return e.session})),a=n.user,c=n.token,o=Object(u.c)((function(e){return e.twoods})).find((function(t){return t.id===e})),i=Ce("text");Object(r.useEffect)((function(){o||s()}),[e]);var s=function(){var n=Object(O.a)(h.a.mark((function n(){var r;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,ae.getById(e);case 3:r=n.sent,t(oe(r)),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),t(y("Error fetching twood",5));case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(){return n.apply(this,arguments)}}(),l=function(){var e=Object(O.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(ue(o,c));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Object(O.a)(h.a.mark((function e(n,r){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.preventDefault(),t(ie(o,{content:n},c));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),f=function(){var e=Object(O.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(se(o,c));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d={like:a?l:null,reply:a?p:null,remove:a&&o&&a.id===o.user.id?f:null};return{twood:o,operations:d,replyField:i}},We={twoods:["content","likes"],users:["username"],rooms:["name"]},Ae=function(e){var t=e.initialState,n=e.type,c=Object(Z.g)(),o=function(e){var t=Object(r.useState)(0),n=Object(x.a)(t,2),a=n[0],c=n[1],o=Object(r.useState)([]),u=Object(x.a)(o,2),i=u[0],s=u[1],l=Object(r.useState)(10),p=Object(x.a)(l,2),f=p[0],d=(p[1],Object(r.useState)(!1)),m=Object(x.a)(d,2),v=m[0],b=m[1],E=function(e){for(var t=Math.ceil(e.length/f),n=[],r=0,a=0;a<t;a++){n[a]=[];for(var c=0;c<f&&(n[a][c]=e[r],++r!==e.length);c++);}s(n)};Object(r.useEffect)((function(){e[0]&&E(e)}),[e]);var w={next:a!=i.length-1?function(){c(a+1)}:null,prev:a>0?function(){c(a-1)}:null,sort:function(t){b(!v),E(e.sort((function(e,n){return v?e[t]>n[t]:e[t]<n[t]})))}};return{current:i[0]?i[a]:[],operations:w}}(t),u=o.current,i=o.operations,l=i.next,p=i.prev,f=i.sort,d=We[n];return u[0]?a.a.createElement("div",null,a.a.createElement(s.h,null,a.a.createElement(s.k,null,a.a.createElement(s.m,{head:!0},d.map((function(e){return a.a.createElement(s.l,{onClick:function(){return f(e)},key:e},e)})))),a.a.createElement(s.i,null,u.map((function(e){return a.a.createElement(s.m,{key:e.id,onClick:function(){return c.push("/".concat(n,"/").concat(e.id))}},d.map((function(t){return a.a.createElement(s.j,{key:t},e[t])})))})))),a.a.createElement(s.b,{disabled:!p,onClick:function(){return p()}},"Prev Page"),a.a.createElement(s.b,{disabled:!l,onClick:function(){return l()}},"Next Page")):null},Ue=function(e){var t=e.user;return t?t?a.a.createElement("div",null,a.a.createElement("p",null,"username: ",t.username," "),a.a.createElement("p",null,"id: ",t.id," "),a.a.createElement(Ae,{initialState:t.twoods,type:"twoods"})):void 0:null},Fe=function(e){var t=e.initialState,n=e.id;return a.a.createElement(_e,{title:"Users",id:n},a.a.createElement(Ae,{initialState:t,type:"users"}))},Pe=function(e){var t=e.id,n=Re(t),r=n.twood,c=n.operations;if(!r)return null;var o=r.user;c.like;return a.a.createElement(s.d,{label:o.username},a.a.createElement(i.b,{to:"/twoods/".concat(r.id)},r.content,a.a.createElement("p",null,"LIKES: ",r.likes)))},ze=function(e){var t=e.id,n=Re(t),r=n.twood,c=n.operations,o=n.replyField;if(!r)return null;var u=c.like,i=c.reply,l=c.remove,p=r.user;return a.a.createElement("div",null,a.a.createElement(s.d,{label:p.username},r.content,a.a.createElement("p",null,"LIKES: ",r.likes)),i?a.a.createElement("form",null,a.a.createElement(s.n,o.input),a.a.createElement(s.b,{size:"sm",onClick:function(e){c.reply(o.input.value,e)}},"REPLY")):null,u?a.a.createElement(s.b,{size:"sm",onClick:function(){return u()}},"LIKE"):null,l?a.a.createElement(s.b,{size:"sm",onClick:function(){return l()}},"REMOVE"):null,a.a.createElement(s.c,null),r.replies.map((function(e){return a.a.createElement(Pe,{key:e.id,id:e.id})})))},Be=function(e){var t=e.room;return t?a.a.createElement("div",null,a.a.createElement("p",null,"name: ",t.name," "),a.a.createElement("p",null,"id: ",t.id," "),a.a.createElement(Ae,{initialState:t.twoods,type:"twoods"})):null},Le={signin:function(e){e.initialState;var t=e.id,n=Object(Z.g)(),r=Ce("text"),c=Ce("text"),o=Object(u.b)();return a.a.createElement(_e,{title:"Sign In",id:t},a.a.createElement("form",null,"User Name: ",a.a.createElement(s.n,r.input),"Password: ",a.a.createElement(s.n,c.input),a.a.createElement(s.b,{styles:{float:"right"},id:"signin-button",type:"submit",primary:!0,onClick:function(e){e.preventDefault();var n=r.input.value,a=c.input.value;o(function(e,t,n){return function(){var r=Object(O.a)(h.a.mark((function r(a){var c,o;return h.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return c={username:e,password:t},r.prev=1,r.next=4,R.auth(c);case 4:o=r.sent,window.localStorage.setItem("id",o.user.id),window.localStorage.setItem("token",o.token),a({type:"INIT_SESSION",data:o}),a(M(n)),a(g("Successfully logged in",5)),r.next=15;break;case 12:r.prev=12,r.t0=r.catch(1),a(y("Failed to log in, password or username incorrect",5));case 15:case"end":return r.stop()}}),r,null,[[1,12]])})));return function(e){return r.apply(this,arguments)}}()}(n,a,t)),r.clear(),c.clear()}},"Sign In")),"not a twooder user?",a.a.createElement(s.b,{id:"redirect-sign-up-button",type:"submit",onClick:function(){return o(M(t)),void n.push("/signup/")}},"Sign Up!"))},signup:function(e){e.initialState;var t=e.id,n=Ce("text"),r=Ce("text"),c=Object(u.b)(),o=function(){var e=Object(O.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a={username:n.input.value,password:r.input.value},e.prev=2,e.next=5,A.create(a);case 5:c(g("Successfully created user",5)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),c(y("Failed to create user",5));case 11:n.clear(),r.clear();case 13:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}();return a.a.createElement(_e,{title:"Sign Up",id:t},a.a.createElement("form",null,"User Name: ",a.a.createElement(s.n,n.input),"Password: ",a.a.createElement(s.n,r.input),a.a.createElement(s.b,{id:"signin-button",type:"submit",onClick:o},"Sign Up")))},twood:function(e){var t=e.initialState,n=e.id;return a.a.createElement(_e,{title:"Twood",id:n},a.a.createElement(ze,{id:t}))},twoods:function(e){var t=e.initialState,n=e.id;return a.a.createElement(_e,{title:"Twoods",id:n},a.a.createElement(Ae,{initialState:t,type:"twoods"}))},newtwood:function(e){e.initialState;var t=e.id,n=Object(u.c)((function(e){return e.session.token})),r=Object(Z.g)(),c=Object(u.b)(),o=Ce("text"),i=Ce("text"),l=function(){var e=Object(O.a)(h.a.mark((function e(t){var a,u;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a={title:o.input.value,content:i.input.value},e.prev=2,e.next=5,ae.create(a,n);case 5:u=e.sent,c(g("Twood successfully created",5)),r.push("twoods/".concat(u.id)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),c(y("Error creating twood",5));case 13:i.clear();case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}();return a.a.createElement(_e,{title:"New Twood",id:t},a.a.createElement("form",null,"content:",a.a.createElement(s.n,Object.assign({multiline:!0},i.input)),a.a.createElement(s.b,{id:"twood-button",type:"submit",onClick:l},"Twood")))},room:function(e){var t=e.initialState,n=e.id;return a.a.createElement(_e,{title:"Room",id:n},a.a.createElement(Be,{room:t}))},rooms:function(e){var t=e.initialState,n=e.id;return a.a.createElement(_e,{title:"Rooms",id:n},a.a.createElement(Ae,{initialState:t,type:"rooms"}))},newroom:function(e){e.initialState;var t=e.id,n=Ce("text"),r=Object(u.c)((function(e){return e.session.token})),c=Object(Z.g)(),o=Object(u.b)(),i=function(){var e=Object(O.a)(h.a.mark((function e(t){var a,u;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a={name:n.input.value},e.prev=2,e.next=5,ve.create(a,r);case 5:u=e.sent,o(g("Room successfully created",5)),c.push("rooms/".concat(u.id)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),o(y("Error creating Room",5));case 13:n.clear();case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}();return a.a.createElement(_e,{title:"New Room",id:t},a.a.createElement("form",null,"name:",a.a.createElement(s.n,n.input),a.a.createElement(s.b,{type:"submit",onClick:i},"Create")))},user:function(e){var t=e.initialState,n=e.id;return a.a.createElement(_e,{title:"User",id:n},a.a.createElement(Ue,{user:t}))},users:Fe,ownuser:function(e){e.initialState;var t=e.id,n=Object(u.c)((function(e){return e.session})).user;return a.a.createElement(_e,{title:"Your Profile",id:t},a.a.createElement(Ue,{user:n}))}};var Me=function(){var e=Object(u.c)((function(e){return e.windows}));return a.a.createElement("div",{style:{position:"relative"}},e.items.map((function(e){var t=Le[e.type];return a.a.createElement(t,{key:e.id,initialState:e.initialState,id:e.id})})))};var Ye=function(){var e=Object(u.b)();return Object(r.useEffect)((function(){e(function(){var e=Object(O.a)(h.a.mark((function e(t){var n,r,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.localStorage.getItem("id"),r=window.localStorage.getItem("token"),t(B()),!n||!r){e.next=18;break}return e.prev=4,e.next=7,A.getById(n);case 7:a=e.sent,t({type:"INIT_SESSION",data:{user:a,token:r}}),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(4),window.localStorage.removeItem("id"),window.localStorage.removeItem("token"),t({type:"RESET_SESSION"});case 16:e.next=19;break;case 18:t({type:"RESET_SESSION"});case 19:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t){return e.apply(this,arguments)}}())}),[]),a.a.createElement(Te,null,a.a.createElement(H,null),a.a.createElement(k,null),a.a.createElement(he,null),a.a.createElement(Me,null),a.a.createElement(X,null))},Je=n(21),qe=n(52),Ke=n(53),Ve=Object(Je.combineReducers)({notification:j,session:q,windows:Y,twoods:le}),He=Object(Je.createStore)(Ve,Object(qe.composeWithDevTools)(Object(Je.applyMiddleware)(Ke.a)));o.a.render(a.a.createElement(u.a,{store:He},a.a.createElement(i.a,null,a.a.createElement(Ye,null))),document.getElementById("root"))}},[[54,1,2]]]);
//# sourceMappingURL=main.2bd975d8.chunk.js.map